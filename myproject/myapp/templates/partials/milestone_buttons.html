<!-- milestone_buttons.html -->

{% if project.owner is None or is_participant %}
    <!-- è¿½åŠ ãƒœã‚¿ãƒ³ -->
    <a href="{% url 'milestone_create_with_parent' parent_milestone_id=milestone.id %}" class="btn btn-success btn-sm">ï¼‹</a>

    <!-- å‰Šé™¤ãƒœã‚¿ãƒ³ -->
    <form action="{% url 'delete_milestone' pk=milestone.id %}" method="post" style="display: inline; margin: 0;">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger btn-sm">âˆ’</button>
    </form>

    <!-- ç·¨é›†ãƒœã‚¿ãƒ³ -->
    <a href="{% url 'milestone_edit' pk=milestone.id %}" class="btn btn-warning btn-sm">ğŸ“</a>

    <!-- ç€æ‰‹ãƒœã‚¿ãƒ³ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèªè¨¼ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿ï¼‰ -->
    {% if user.is_authenticated and milestone.status == 'not_started' and not milestone.child_milestones.exists %}
        <form action="{% url 'start_milestone' pk=milestone.id %}" method="post" style="display: inline; margin: 0;">
            {% csrf_token %}
            <button type="submit" class="btn btn-primary btn-sm">âœ”ï¸</button>
        </form>
    {% endif %}
{% endif %}

<!-- å®Œäº†å ±å‘Šã€ã‚¢ã‚¯ã‚»ãƒ—ãƒˆã€ãƒªã‚¸ã‚§ã‚¯ãƒˆãƒœã‚¿ãƒ³ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ï¼‰ -->
{% if user.is_authenticated and user == project.owner and milestone.status == 'in_progress' %}
    <form action="{% url 'complete_milestone' milestone.id %}" method="post" style="display: inline; margin: 0;">
        {% csrf_token %}
        <input type="submit" value="accept" class="btn btn-info btn-sm">
    </form>
    <!-- å¦èªãƒœã‚¿ãƒ³ -->
    <form action="{% url 'deny_milestone' milestone.id %}" method="post" style="display: inline; margin: 0;">
        {% csrf_token %}
        <input type="submit" value="reject" class="btn btn-danger btn-sm">
    </form>
{% endif %}

<!-- å®Œäº†ã—ãŸãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åè¡¨ç¤º -->
{% if milestone.status == 'completed' %}
    <span style="margin-left: 10px;">
        å®Œäº†:
        {% if milestone.assigned_to %}
            {{ milestone.assigned_to.username }}
        {% else %}
            åŒ¿å
        {% endif %}
    </span>
{% endif %}